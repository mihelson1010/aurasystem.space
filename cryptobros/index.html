<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CRYPTOBROS â€” The Mihelson Triad</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#00f3ff">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/dist/tabler-icons.min.css">

<style>
:root{
 --bg:#f5f7fa;
 --card:#ffffff;
 --text:#111;
 --muted:#666;
 --neon:#00f3ff;
 --pink:#ff2a6d;
 --radius:18px;
}
[data-theme="dark"]{
 --bg:#0a0a0a;
 --card:#111;
 --text:#eee;
 --muted:#888;
}

*{box-sizing:border-box;margin:0;padding:0}
body{
 font-family:Inter,system-ui;
 background:var(--bg);
 color:var(--text);
 transition:.3s;
 display: flex;
 flex-direction: column;
 min-height: 100vh;
}

/* HEADER */
header{
 position:fixed;
 inset:0 0 auto 0;
 height:64px;
 background:rgba(255,255,255,.8);
 backdrop-filter:blur(14px);
 display:flex;
 align-items:center;
 padding:0 20px;
 z-index:1000;
}
.logo{
 font-size:1.6rem;
 font-weight:800;
 background:linear-gradient(90deg,var(--neon),var(--pink));
 -webkit-background-clip:text;
 color:transparent;
 cursor:pointer;
}
.icon-btn{
 margin-left:12px;
 font-size:1.6rem;
 cursor:pointer;
}

/* LANGUAGE */
.lang-selector {
  position: relative;
  display: inline-block;
}
.lang-btn {
  background: var(--card);
  border: 1px solid rgba(0,0,0,0.1);
  padding: 6px 12px;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
}
.lang-dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  background: var(--card);
  border: 1px solid rgba(0,0,0,0.1);
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  width: 220px;
  max-height: 300px;
  overflow-y: auto;
  display: none;
  z-index: 1001;
}
.lang-dropdown.show { display: block; }
.lang-item {
  padding: 10px 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 0.95rem;
}
.lang-item:hover { background: rgba(0,243,255,0.1); }

/* SIDEBAR */
.hamburger{
 display:none;
 flex-direction:column;
 gap:5px;
 margin-right:12px;
 cursor:pointer;
}
.hamburger span{
 width:26px;height:3px;
 background:var(--text);
 border-radius:3px;
}
.sidebar{
 position:fixed;
 top:64px;
 bottom:0;
 width:260px;
 background:var(--card);
 border-right:1px solid rgba(0,0,0,.1);
}
.sidebar-item{
 padding:16px 24px;
 display:flex;
 gap:14px;
 cursor:pointer;
 color:var(--muted);
 font-weight:600;
}
.sidebar-item.active,
.sidebar-item:hover{
 color:var(--neon);
}

/* MAIN */
.main{
 margin-left:260px;
 padding-top:64px;
 flex: 1;
}
.page{display:none; padding-bottom: 60px;}
.page.active{display:block}

/* FLICKER RAINBOW */
.flicker-rainbow {
  background: linear-gradient(90deg, var(--neon), var(--pink), #ffd700, #00ffaa, var(--neon));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  animation: flicker 4s infinite alternate;
  font-weight: 800;
}
@keyframes flicker {
  0%, 100% { opacity: 1; filter: blur(0); }
  50% { opacity: 0.95; filter: blur(0.2px); }
}

/* PROFILE */
.profile-header{
 height:300px;
 background:#ddd;
 position:relative;
 background-size:cover;
 background-position:center;
}
.cover-btn{
 position:absolute;
 top:14px;right:14px;
 background:rgba(0,0,0,.6);
 color:#fff;
 padding:6px 14px;
 border-radius:20px;
 cursor:pointer;
}
.profile-card{
 background:var(--card);
 border-radius:20px;
 margin:-90px 30px 30px;
 padding:20px;
}
.avatar-wrap{
 position:relative;
 width:160px;
}
.avatar{
 width:160px;height:160px;
 border-radius:50%;
 background:#ccc;
 overflow:hidden;
 border:5px solid var(--card);
}
.avatar img{width:100%;height:100%;object-fit:cover}
.avatar-btn{
 position:absolute;
 bottom:8px;right:8px;
 width:40px;height:40px;
 background:var(--neon);
 border-radius:50%;
 display:flex;
 align-items:center;
 justify-content:center;
 cursor:pointer;
}

/* POST */
.post{
 background:var(--card);
 margin:20px 30px;
 border-radius:20px;
 padding:20px;
}
.post textarea{
 width:100%;
 min-height:80px;
 border:none;
 resize:none;
 outline:none;
 background:none;
 font-size:1.1rem;
}
.post-tools{
 display:flex;
 gap:20px;
 font-size:1.5rem;
 color:var(--muted);
}
.post-tools label{cursor:pointer}
.post-tools label:hover{color:var(--neon)}

/* FOOTER */
footer{
  margin-top: auto;
  text-align:center;
  padding:20px;
  background: var(--card);
  border-top: 1px solid rgba(0,243,255,0.1);
  animation:rgb 3s linear infinite;
}
@keyframes rgb{
 0%{color:#00f3ff}
 33%{color:#ff2a6d}
 66%{color:#7fff00}
 100%{color:#00f3ff}
}

/* MOBILE */
@media(max-width:768px){
 .hamburger{display:flex}
 .sidebar{transform:translateX(-100%);transition:.3s}
 .sidebar.open{transform:none}
 .main{margin-left:0}
}
</style>
</head>

<body data-theme="light">

<header>
 <div class="hamburger" onclick="toggleSidebar()">
  <span></span><span></span><span></span>
 </div>
 <div class="logo" onclick="go('home')">CRYPTOBROS</div>

 <!-- LANGUAGE SELECTOR -->
 <div class="lang-selector">
   <div class="lang-btn" onclick="toggleLangDropdown()">
     <span id="current-lang-flag">ğŸ‡·ğŸ‡º</span>
     <span>Language</span>
   </div>
   <div class="lang-dropdown" id="langDropdown">
     <div class="lang-item" data-lang="en" onclick="setLanguage('en')"><span>ğŸ‡ºğŸ‡¸</span> English</div>
     <div class="lang-item" data-lang="de" onclick="setLanguage('de')"><span>ğŸ‡©ğŸ‡ª</span> Deutsch</div>
     <div class="lang-item" data-lang="fr" onclick="setLanguage('fr')"><span>ğŸ‡«ğŸ‡·</span> FranÃ§ais</div>
     <div class="lang-item" data-lang="he" onclick="setLanguage('he')"><span>ğŸ‡®ğŸ‡±</span> ×¢×‘×¨×™×ª</div>
     <div class="lang-item" data-lang="it" onclick="setLanguage('it')"><span>ğŸ‡®ğŸ‡¹</span> Italiano</div>
     <div class="lang-item" data-lang="es" onclick="setLanguage('es')"><span>ğŸ‡ªğŸ‡¸</span> EspaÃ±ol</div>
     <div class="lang-item" data-lang="nl" onclick="setLanguage('nl')"><span>ğŸ‡³ğŸ‡±</span> Nederlands</div>
     <div class="lang-item" data-lang="pt" onclick="setLanguage('pt')"><span>ğŸ‡µğŸ‡¹</span> PortuguÃªs</div>
     <div class="lang-item" data-lang="sv" onclick="setLanguage('sv')"><span>ğŸ‡¸ğŸ‡ª</span> Svenska</div>
     <div class="lang-item" data-lang="ru" onclick="setLanguage('ru')"><span>ğŸ‡·ğŸ‡º</span> Ğ ÑƒÑÑĞºĞ¸Ğ¹</div>
     <div class="lang-item" data-lang="zh-TW" onclick="setLanguage('zh-TW')"><span>ğŸ‡¹ğŸ‡¼</span> ç¹é«”ä¸­æ–‡</div>
     <div class="lang-item" data-lang="ja" onclick="setLanguage('ja')"><span>ğŸ‡¯ğŸ‡µ</span> æ—¥æœ¬èª</div>
     <div class="lang-item" data-lang="ko" onclick="setLanguage('ko')"><span>ğŸ‡°ğŸ‡·</span> í•œêµ­ì–´</div>
     <div class="lang-item" data-lang="vi" onclick="setLanguage('vi')"><span>ğŸ‡»ğŸ‡³</span> Tiáº¿ng Viá»‡t</div>
     <div class="lang-item" data-lang="ar" onclick="setLanguage('ar')"><span>ğŸ‡¸ğŸ‡¦</span> Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</div>
   </div>
 </div>

 <div class="icon-btn" onclick="toggleTheme()"><i class="ti ti-moon"></i></div>
</header>

<nav class="sidebar" id="sidebar">
 <div class="sidebar-item" onclick="go('home', this)"><i class="ti ti-home"></i> Home</div>
 <div class="sidebar-item" onclick="go('tribunal', this)"><i class="ti ti-scale"></i> The Mihelson Triad</div>
 <div class="sidebar-item" onclick="go('manifest', this)"><i class="ti ti-file"></i> Manifesto</div>
 <div class="sidebar-item" onclick="go('pay', this)"><i class="ti ti-coin"></i> Pay 300 AUS</div>
 <div class="sidebar-item" onclick="go('profile', this)"><i class="ti ti-user"></i> Profile</div>
 <div class="sidebar-item" onclick="go('feed', this)"><i class="ti ti-news"></i> Ğ›ĞµĞ½Ñ‚Ğ°</div>
 <div class="sidebar-item" onclick="go('messenger', this)"><i class="ti ti-message-circle"></i> Messenger</div>
 <div class="sidebar-item" onclick="logout()"><i class="ti ti-logout"></i> Logout</div>
</nav>

<div class="main">

<!-- HOME -->
<section id="home" class="page">
  <div style="background:url('https://aurasystem.space/assets/bg5.png') center/cover;position:fixed;top:0;left:0;width:100%;height:100%;opacity:0.25;z-index:-1;"></div>
  <div style="padding:100px 20px;text-align:center;color:var(--neon);">
    <h1 class="flicker-rainbow" style="font-size:3.2rem;margin-bottom:20px;">CRYPTOBROS</h1>
    <p class="flicker-rainbow" style="font-size:1.2rem;margin:20px auto;line-height:1.6;max-width:600px;">
      Privacy-native tools.<br>
      No servers. No accounts. Full control.
    </p>
    <button style="margin-top:30px;padding:12px 32px;background:linear-gradient(135deg,var(--neon),var(--pink));border:none;border-radius:50px;color:#000;font-weight:600;cursor:pointer;" onclick="go('tribunal')">
      The Mihelson Triad
    </button>
  </div>
</section>

<!-- TRIBUNAL -->
<section id="tribunal" class="page active">
  <div style="background:linear-gradient(135deg,#0f0c29,#302b63);position:fixed;top:0;left:0;width:100%;height:100%;opacity:0.25;z-index:-1;"></div>
  <div style="max-width:800px;margin:60px auto;padding:0 20px;">
    <h2 class="flicker-rainbow" style="font-size:2.8rem;text-align:center;margin-bottom:30px;">
      The Mihelson Triad
    </h2>
    <div style="background:rgba(0,0,0,0.3);border-radius:16px;padding:24px;margin-bottom:30px;">
      <p style="color:var(--muted);font-size:1.1rem;line-height:1.6;">
        In the AI industry, thereâ€™s one of the toughest benchmarks â€” <strong>ARC-AGI-2</strong>.<br>
        Itâ€™s designed to break even the strongest models.<br>
        The human baseline: <strong>60%</strong> (from 600 people).
      </p>
    </div>
    <div style="background:var(--card);border-radius:16px;overflow:hidden;box-shadow:0 4px 20px rgba(0,0,0,0.1);">
      <div style="display:flex;justify-content:space-between;padding:14px 20px;font-weight:600;background:rgba(0,243,255,0.1);">
        <span>Model</span>
        <span>ARC-AGI-2</span>
      </div>
      <div style="display:flex;justify-content:space-between;padding:12px 20px;border-bottom:1px solid var(--border);"><span>GPT-5</span><span>10%</span></div>
      <div style="display:flex;justify-content:space-between;padding:12px 20px;border-bottom:1px solid var(--border);"><span>Claude Sonnet</span><span>13%</span></div>
      <div style="display:flex;justify-content:space-between;padding:12px 20px;border-bottom:1px solid var(--border);"><span>Grok 4</span><span>16%</span></div>
      <div style="display:flex;justify-content:space-between;padding:12px 20px;border-bottom:1px solid var(--border);"><span>Gemini 3</span><span>32%</span></div>
      <div style="display:flex;justify-content:space-between;padding:12px 20px;border-bottom:1px solid var(--border);"><span>Claude Opus 4.5</span><span>37%</span></div>
      <div style="display:flex;justify-content:space-between;padding:12px 20px;border-bottom:1px solid var(--border);"><span>Gemini 3 Deep Think</span><span>45%</span></div>
      <div style="display:flex;justify-content:space-between;padding:12px 20px;border-bottom:1px solid var(--border);background:rgba(255,42,109,0.1);"><span><strong>GPT-5.2 Thinking</strong></span><span><strong>53%</strong></span></div>
      <div style="display:flex;justify-content:space-between;padding:12px 20px;background:rgba(0,255,170,0.1);"><span><strong>Human Average</strong></span><span><strong>60%</strong></span></div>
    </div>
    <div style="margin-top:24px;background:rgba(0,243,255,0.1);padding:20px;border-radius:16px;text-align:center;">
      <p style="color:var(--neon);font-weight:600;font-size:1.1rem;">
        âœ¨ Qwen2 â€” core of The Mihelson Triad.<br>
        Not racing alone. Ruling together.
      </p>
    </div>
    <p style="text-align:center;color:var(--muted);margin:24px 0;font-style:italic;">
      Progress that once took years now fits in a quarter.<br>
      This is no longer a model race â€” itâ€™s a level shift.
    </p>
    <div style="text-align:center;margin-top:30px;">
      <button class="btn" style="padding:12px 32px;" onclick="alert('Debate engine loading...')">
        Debate a Token
      </button>
    </div>
  </div>
</section>

<!-- MANIFESTO -->
<section id="manifest" class="page">
  <div style="background:url('https://aurasystem.space/assets/abstract.png') center/cover;position:fixed;top:0;left:0;width:100%;height:100%;opacity:0.25;z-index:-1;"></div>
  <div style="max-width:700px;margin:80px auto;padding:0 20px;">
    <h2 class="flicker-rainbow" style="font-size:2.6rem;text-align:center;margin-bottom:30px;">MANIFESTO</h2>
    <ul style="font-size:1.2rem;line-height:1.8;text-align:left;padding-left:20px;color:var(--text);">
      <li>Bros in. Noise out.</li>
      <li>No servers. Zero KYC. Only wallet.</li>
      <li>We do not advise buying! We advise not buying!</li>
      <li>Pay 300 AUS to prove youâ€™re real.</li>
      <li>Privacy-native. End-to-end encrypted.</li>
      <li>Full control. No tracking. Ever.</li>
    </ul>
    <div style="margin-top:30px;display:flex;align-items:center;gap:10px;justify-content:center;">
      <input type="checkbox" id="agree" style="accent-color:var(--neon);">
      <label for="agree">I agree to the Manifesto and accept full responsibility</label>
    </div>
    <button id="pay-btn" disabled style="margin-top:20px;padding:12px 32px;background:linear-gradient(135deg,var(--neon),var(--pink));border:none;border-radius:50px;color:#000;font-weight:600;width:100%;" onclick="go('pay')">
      Pay 300 AUS
    </button>
  </div>
</section>

<!-- PAY PAGE -->
<section id="pay" class="page">
  <div style="background:linear-gradient(135deg,#141E30,#243B55);position:fixed;top:0;left:0;width:100%;height:100%;opacity:0.25;z-index:-1;"></div>
  <div style="max-width:600px;margin:80px auto;padding:0 20px;text-align:center;">
    <h2 class="flicker-rainbow" style="font-size:2.4rem;margin-bottom:20px;">Prove Youâ€™re Real</h2>
    <p style="color:var(--muted);margin-bottom:30px;">
      Pay 300 AUS or sign the Manifesto to join CRYPTOBROS.<br>
      <strong>No servers. No tracking. Full control.</strong>
    </p>

    <!-- YOUR QR CODE -->
    <div style="background:var(--card);padding:20px;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.1);margin-bottom:30px;">
      <img src="5R8wHTuWuhxGE6qUHbPh4RZatKBAvxJKpmLAdA2GbzPL.png" 
           style="width:200px;height:200px;object-fit:contain;">
      <p style="margin-top:12px;color:var(--muted);font-size:0.9rem;word-break:break-all;">
        <strong>Solana Address:</strong><br>
        5R8wHTuWuhxGE6qUHbPh4RZatKBAvxJKpmLAdA2GbzPL
      </p>
    </div>

    <div style="display:flex;flex-direction:column;gap:12px;">
      <button class="btn" style="background:linear-gradient(135deg,#00ffaa,#ffd700);color:#000;" onclick="signManifesto()">
        <i class="ti ti-signature"></i> Sign Manifesto (Free Registration)
      </button>
      <button class="btn" style="background:linear-gradient(135deg,#9945FF,#14F195);color:#000;" onclick="openInPhantom()">
        <i class="ti ti-external-link"></i> Open in Phantom
      </button>
      <div style="margin-top:20px;">
        <input type="text" id="promo-code" placeholder="Enter promo code" style="width:100%;padding:10px;border:1px solid var(--border);border-radius:8px;background:var(--bg);color:var(--text);">
        <button class="btn" style="margin-top:8px;width:100%;" onclick="redeemPromo()">
          Redeem Promo Code
        </button>
      </div>
    </div>
  </div>
</section>

<!-- PROFILE -->
<section id="profile" class="page">
 <div class="profile-header" id="cover">
  <label class="cover-btn">
   <i class="ti ti-photo"></i> Upload cover
   <input type="file" hidden accept="image/*" onchange="previewCover(this)">
  </label>
 </div>
 <div class="profile-card">
  <div class="avatar-wrap">
   <div class="avatar"><img id="ava" src="" alt=""></div>
   <label class="avatar-btn">
    <i class="ti ti-plus"></i>
    <input type="file" hidden accept="image/*" onchange="previewAvatar(this)">
   </label>
  </div>
  <div style="margin-top:20px;">
    <div><strong>Username:</strong> <span id="profile-username">User</span></div>
    <div><strong>Bio:</strong> <span id="profile-bio">Tell your story...</span></div>
    <button onclick="editProfile()" style="margin-top:10px;padding:6px 16px;background:var(--neon);border:none;border-radius:6px;">Edit profile</button>
  </div>
 </div>
 <div class="post">
  <textarea placeholder="What's new?"></textarea>
  <div class="post-tools">
   <label><i class="ti ti-photo"></i>
    <input type="file" hidden accept="image/*">
   </label>
   <label><i class="ti ti-video"></i>
    <input type="file" hidden accept="video/*">
   </label>
  </div>
 </div>
</section>

<!-- FEED -->
<section id="feed" class="page">
  <div style="background:linear-gradient(135deg,#16222A,#3A6073);position:fixed;top:0;left:0;width:100%;height:100%;opacity:0.25;z-index:-1;"></div>
  <div class="post" style="margin:20px;">
    <textarea placeholder="Whatâ€™s new, Bro?" id="feed-post-text" style="width:100%;min-height:80px;border:none;resize:none;outline:none;background:none;font-size:1.1rem;"></textarea>
    <div class="post-tools">
      <label><i class="ti ti-photo"></i>
        <input type="file" hidden accept="image/*">
      </label>
      <label><i class="ti ti-video"></i>
        <input type="file" hidden accept="video/*">
      </label>
    </div>
    <button onclick="createFeedPost()" style="margin-top:12px;padding:8px 20px;background:linear-gradient(135deg,var(--neon),var(--pink));border:none;border-radius:50px;color:#000;font-weight:600;">Post</button>
  </div>
  <div id="feed-posts" style="margin-top:20px;"></div>
</section>

<!-- MESSENGER -->
<section id="messenger" class="page">
  <div style="background:linear-gradient(135deg,#16222A,#3A6073);position:fixed;top:0;left:0;width:100%;height:100%;opacity:0.25;z-index:-1;"></div>
  <div style="padding:80px;text-align:center;">
    <h2 class="flicker-rainbow">P2P Messenger</h2>
    <p style="color:var(--muted);">E2EE â€¢ No metadata â€¢ WebRTC</p>
  </div>
</section>

</div>

<footer>
 Produced by MIHELSON Â© 2025 â€¢ The Mihelson Triad is watching.
</footer>

<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
<script>
// LANGUAGE
const LANGUAGES = {
  en: 'ğŸ‡ºğŸ‡¸', de: 'ğŸ‡©ğŸ‡ª', fr: 'ğŸ‡«ğŸ‡·', he: 'ğŸ‡®ğŸ‡±', it: 'ğŸ‡®ğŸ‡¹', es: 'ğŸ‡ªğŸ‡¸',
  nl: 'ğŸ‡³ğŸ‡±', pt: 'ğŸ‡µğŸ‡¹', sv: 'ğŸ‡¸ğŸ‡ª', ru: 'ğŸ‡·ğŸ‡º', 'zh-TW': 'ğŸ‡¹ğŸ‡¼',
  ja: 'ğŸ‡¯ğŸ‡µ', ko: 'ğŸ‡°ğŸ‡·', vi: 'ğŸ‡»ğŸ‡³', ar: 'ğŸ‡¸ğŸ‡¦'
};
function setLanguage(lang) {
  localStorage.setItem('language', lang);
  document.getElementById('current-lang-flag').textContent = LANGUAGES[lang] || 'ğŸŒ';
  document.querySelector('.lang-dropdown').classList.remove('show');
}
function toggleLangDropdown() {
  document.querySelector('.lang-dropdown').classList.toggle('show');
}
document.addEventListener('click', (e) => {
  if (!e.target.closest('.lang-selector')) {
    document.querySelector('.lang-dropdown').classList.remove('show');
  }
});
(function initLanguage() {
  const saved = localStorage.getItem('language') || 'ru';
  setLanguage(saved);
})();

// THEME
function toggleTheme() {
  document.body.dataset.theme = 
    document.body.dataset.theme === 'dark' ? 'light' : 'dark';
  localStorage.setItem('theme', document.body.dataset.theme);
}
(function initTheme() {
  const saved = localStorage.getItem('theme') || 'light';
  document.body.dataset.theme = saved;
})();

// NAVIGATION
function go(id, element) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(id)?.classList.add('active');
  document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
  if (element) element.classList.add('active');
}

// SIDEBAR
function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('open');
}

// PROFILE
function previewCover(input) {
  if (input.files?.[0]) {
    const reader = new FileReader();
    reader.onload = e => {
      document.getElementById('cover').style.backgroundImage = `url(${e.target.result})`;
      localStorage.setItem('cover', e.target.result);
    };
    reader.readAsDataURL(input.files[0]);
  }
}
function previewAvatar(input) {
  if (input.files?.[0]) {
    const reader = new FileReader();
    reader.onload = e => {
      document.getElementById('ava').src = e.target.result;
      localStorage.setItem('avatar', e.target.result);
    };
    reader.readAsDataURL(input.files[0]);
  }
}
function editProfile() {
  const user = prompt('Username:', document.getElementById('profile-username').textContent);
  const bio = prompt('Bio:', document.getElementById('profile-bio').textContent);
  if (user !== null) document.getElementById('profile-username').textContent = user;
  if (bio !== null) document.getElementById('profile-bio').textContent = bio;
  localStorage.setItem('profile', JSON.stringify({ username: user, bio }));
}

// FEED
function createFeedPost() {
  const text = document.getElementById('feed-post-text')?.value.trim();
  if (!text) return;
  const posts = JSON.parse(localStorage.getItem('feedPosts') || '[]');
  posts.unshift({ id: Date.now(), content: text });
  localStorage.setItem('feedPosts', JSON.stringify(posts));
  document.getElementById('feed-post-text').value = '';
  renderFeedPosts();
}
function renderFeedPosts() {
  const container = document.getElementById('feed-posts');
  if (!container) return;
  const posts = JSON.parse(localStorage.getItem('feedPosts') || '[]');
  container.innerHTML = '';
  posts.forEach(post => {
    const el = document.createElement('div');
    el.className = 'post';
    el.style.margin = '20px';
    el.innerHTML = `<div style="font-weight:600;">You</div><div style="margin:8px 0;">${post.content}</div>`;
    container.appendChild(el);
  });
}

// PAY / SOLANA
function signManifesto() {
  if (!window.solana && !window.phantom?.solana) {
    alert('Install Phantom wallet');
    return;
  }
  const message = `I agree to the CRYPTOBROS Manifesto. Nonce: ${Date.now()}`;
  const provider = window.solana || window.phantom.solana;
  provider.signMessage(new TextEncoder().encode(message), 'utf8')
    .then(() => {
      localStorage.setItem('isReal', 'true');
      alert('âœ… You are real. Welcome to CRYPTOBROS.');
      go('home');
    })
    .catch(err => alert('Signature failed: ' + err.message));
}
function openInPhantom() {
  const addr = "5R8wHTuWuhxGE6qUHbPh4RZatKBAvxJKpmLAdA2GbzPL";
  window.open(`https://phantom.app/ul/v1/transfer?to=${addr}&amount=300000000000`, '_blank');
}
function redeemPromo() {
  const code = document.getElementById('promo-code').value.trim();
  if (code) {
    localStorage.setItem('isReal', 'true');
    localStorage.setItem('promo', code);
    alert('âœ… Promo activated!');
    go('home');
  }
}

// LOGOUT
function logout() {
  if (confirm('Wipe all local data?')) {
    localStorage.clear();
    location.reload();
  }
}

// INIT
window.addEventListener('DOMContentLoaded', () => {
  // Load profile
  const savedProfile = JSON.parse(localStorage.getItem('profile') || '{}');
  if (savedProfile.username) document.getElementById('profile-username').textContent = savedProfile.username;
  if (savedProfile.bio) document.getElementById('profile-bio').textContent = savedProfile.bio;
  
  // Load media
  const cover = localStorage.getItem('cover');
  if (cover) document.getElementById('cover').style.backgroundImage = `url(${cover})`;
  const avatar = localStorage.getItem('avatar');
  if (avatar) document.getElementById('ava').src = avatar;
  
  // Feed
  renderFeedPosts();
  
  // Manifest checkbox
  document.getElementById('agree')?.addEventListener('change', e => {
    document.getElementById('pay-btn').disabled = !e.target.checked;
  });
  
  // Go to home if not real
  if (!localStorage.getItem('isReal')) {
    go('tribunal');
  }
});
</script>

</body>
       </html>
